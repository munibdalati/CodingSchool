{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Munib\\\\Desktop\\\\advanced_node_auth\\\\client\\\\src\\\\components\\\\screens\\\\LoginScreen.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Link, Navigate } from \"react-router-dom\";\nimport \"./LoginScreen.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LoginScreen = () => {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  useEffect(() => {\n    if (localStorage.getItem(\"auth_token\")) {\n      Navigate(\"/\");\n    }\n  }, []);\n  const loginHandler = async e => {\n    e.preventDefault();\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    try {\n      const {\n        data\n      } = await axios.post(\"/api/auth/login\", {\n        email,\n        password\n      }, config);\n      localStorage.setItem(\"authToken\", data.token);\n      Navigate(\"/\");\n    } catch (error) {\n      setError(error.response.data.error);\n      setTimeout(() => {\n        setError(\"\");\n      }, 5000);\n    }\n    //   try {\n    //     const response = await axios.post(\n    //       \"/api/auth/login\",\n    //       { email, password },\n    //       config\n    //     );\n    //     if (response && response.data && response.data.token) {\n    //       localStorage.setItem(\"authToken\", response.data.token);\n    //       Navigate(\"/\");\n    //     } else {\n    //       // Handle the case when the response doesn't have the expected data\n    //       console.error(\"Unexpected response format:\", response);\n    //     }\n    //   } catch (error) {\n    //     setError(error.response?.data?.error || \"An error occurred.\");\n    //     setTimeout(() => {\n    //       setError(\"\");\n    //     }, 5000);\n    //   }\n    // };\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-screen\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: loginHandler,\n        className: \"login-screen__form\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"login-screen__title\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-message\",\n          children: [\" \", error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            required: true,\n            id: \"email\",\n            placeholder: \"Enter email address\",\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            tabIndex: 1\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: [\"Password:\", /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/forgotpassword\",\n              className: \"login-screen__forgotpassword\",\n              tabIndex: 4,\n              children: [\" \", \"Forgot Password?\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            required: true,\n            id: \"password\",\n            placeholder: \"Enter password\",\n            value: password,\n            onChange: e => setPassword(e.target.value),\n            tabIndex: 2\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          tabIndex: 3,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"login-screen__subtext\",\n          children: [\"Don't have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            children: \"Register\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 36\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this);\n  };\n};\n_s(LoginScreen, \"8U/OabU8FwTNvYwfZel/UK3ReX4=\");\n_c = LoginScreen;\nexport default LoginScreen;\nvar _c;\n$RefreshReg$(_c, \"LoginScreen\");","map":{"version":3,"names":["useState","useEffect","axios","Link","Navigate","jsxDEV","_jsxDEV","LoginScreen","_s","email","setEmail","password","setPassword","error","setError","localStorage","getItem","loginHandler","e","preventDefault","config","header","data","post","setItem","token","response","setTimeout","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","type","required","id","placeholder","value","onChange","target","tabIndex","to","_c","$RefreshReg$"],"sources":["C:/Users/Munib/Desktop/advanced_node_auth/client/src/components/screens/LoginScreen.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Link, Navigate } from \"react-router-dom\";\r\nimport \"./LoginScreen.css\";\r\n\r\nconst LoginScreen = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (localStorage.getItem(\"auth_token\")) {\r\n      Navigate(\"/\");\r\n    }\r\n  }, []);\r\n\r\n  const loginHandler = async (e) => {\r\n    e.preventDefault();\r\n    const config = {\r\n      header: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"/api/auth/login\",\r\n        { email, password },\r\n        config\r\n      );\r\n      localStorage.setItem(\"authToken\", data.token);\r\n\r\n      Navigate(\"/\");\r\n    } catch (error) {\r\n      setError(error.response.data.error);\r\n      setTimeout(() => {\r\n        setError(\"\");\r\n      }, 5000);\r\n    }\r\n    //   try {\r\n    //     const response = await axios.post(\r\n    //       \"/api/auth/login\",\r\n    //       { email, password },\r\n    //       config\r\n    //     );\r\n    //     if (response && response.data && response.data.token) {\r\n    //       localStorage.setItem(\"authToken\", response.data.token);\r\n    //       Navigate(\"/\");\r\n    //     } else {\r\n    //       // Handle the case when the response doesn't have the expected data\r\n    //       console.error(\"Unexpected response format:\", response);\r\n    //     }\r\n    //   } catch (error) {\r\n    //     setError(error.response?.data?.error || \"An error occurred.\");\r\n    //     setTimeout(() => {\r\n    //       setError(\"\");\r\n    //     }, 5000);\r\n    //   }\r\n    // };\r\n\r\n    return (\r\n      <div className=\"login-screen\">\r\n        <form onSubmit={loginHandler} className=\"login-screen__form\">\r\n          <h3 className=\"login-screen__title\">Login</h3>\r\n          {error && <span className=\"error-message\"> {error}</span>}\r\n\r\n          {/* email */}\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"email\">Email:</label>\r\n            <input\r\n              type=\"email\"\r\n              required\r\n              id=\"email\"\r\n              placeholder=\"Enter email address\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              tabIndex={1}\r\n            />\r\n          </div>\r\n\r\n          {/* password */}\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"password\">\r\n              Password:\r\n              <Link\r\n                to=\"/forgotpassword\"\r\n                className=\"login-screen__forgotpassword\"\r\n                tabIndex={4}\r\n              >\r\n                {\" \"}\r\n                Forgot Password?\r\n              </Link>\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              required\r\n              id=\"password\"\r\n              placeholder=\"Enter password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              tabIndex={2}\r\n            />\r\n          </div>\r\n\r\n          <button type=\"submit\" className=\"btn btn-primary\" tabIndex={3}>\r\n            Login\r\n          </button>\r\n          <span className=\"login-screen__subtext\">\r\n            Don't have an account? <Link to=\"/register\">Register</Link>\r\n          </span>\r\n        </form>\r\n      </div>\r\n    );\r\n  };\r\n};\r\n\r\nexport default LoginScreen;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}